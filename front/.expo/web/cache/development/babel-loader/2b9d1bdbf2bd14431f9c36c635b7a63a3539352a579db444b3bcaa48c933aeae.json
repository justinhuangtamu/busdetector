{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useEffect } from 'react';\nimport MapView from 'react-native-maps';\nimport { PROVIDER_GOOGLE, Marker, Polyline, Callout } from 'react-native-maps';\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { sort_times, create_table } from \"./table.js\";\nimport { useNavigation, CommonActions } from '@react-navigation/native';\nimport Swiper from 'react-native-swiper';\nimport buses from \"./buses.json\";\nimport on_bus_buttons from \"./bus-on-campus-button.json\";\nimport off_bus_buttons from \"./bus-off-campus-buttons.json\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar MSC = {\n  latitude: 30.6123,\n  longitude: -96.3415,\n  latitudeDelta: 0.02,\n  longitudeDelta: 0.02\n};\nvar queryString = \"\";\nexport var refresh = true;\nexport function updateRefresh(newValue) {\n  refresh = newValue;\n}\nvar Item = function Item(_ref) {\n  var item = _ref.item,\n    _onPress = _ref.onPress,\n    backgroundColor = _ref.backgroundColor,\n    textColor = _ref.textColor;\n  return _jsx(TouchableOpacity, {\n    onPress: function onPress() {\n      return _onPress(item.id);\n    },\n    style: [styles.item, {\n      backgroundColor: backgroundColor\n    }],\n    children: _jsx(Text, {\n      style: [styles.title, {\n        color: textColor\n      }],\n      children: item.id\n    })\n  });\n};\nexport function Map(_ref2) {\n  var navigation = _ref2.navigation,\n    route = _ref2.route;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    selectedId = _useState2[0],\n    setSelectedId = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    dynamic = _useState4[0],\n    SetDynamic = _useState4[1];\n  useEffect(function () {\n    var unsubscribe = navigation.addListener('focus', function () {\n      refresh = true;\n    });\n    return unsubscribe;\n  }, [navigation]);\n  var waypoints;\n  var bus_ids = \"01\";\n  var static_times;\n  var eta_times;\n  var markers;\n  var buses_loc;\n  if (route.params === undefined) {\n    waypoints = route.params || [];\n    bus_ids = \"01\";\n    static_times = [];\n    markers = [{\n      'stop_name': 'test',\n      'timed_stop': true,\n      'longitude': '60.001',\n      'latitude': '60.001'\n    }];\n    eta_times = [];\n    buses_loc = [];\n  } else {\n    waypoints = route.params[\"waypoint\"] || [];\n    bus_ids = route.params[\"bus_id\"] || \"\";\n    markers = route.params[\"stops\"] || [];\n    static_times = route.params[\"static_time\"] || [];\n    eta_times = route.params[\"dynamic\"] || [];\n    buses_loc = route.params[\"bus\"] || [];\n  }\n  handlePress = function () {\n    var _ref3 = _asyncToGenerator(function* (id) {\n      setSelectedId(id);\n      console.log(id);\n      try {\n        queryString = \"Select latitude, longitude from public.stops inner join public.route_stop_bridge on route_stop_bridge.stop_id=stops.stop_id where (route_id='\" + id + \"' and rank is not null) order by route_stop_bridge.rank asc;\";\n        var waypoint = yield CallDatabase(queryString);\n        var bus_id = id;\n        queryString = \"Select static_time, stop_name, key from static_table where route_id='\" + id + \"' order by (key, index) asc\";\n        var static_time = yield CallDatabase(queryString);\n        queryString = \"Select eta_time, stop_name, stops.stop_id, raw_time from stops inner join route_stop_bridge on route_stop_bridge.stop_id = stops.stop_id where (not stop_name='Way Point' and route_id='\" + id + \"') order by (stops.stop_id, raw_time) asc\";\n        var _dynamic = yield CallDatabase(queryString);\n        queryString = \"select distinct stop_name, timed_stop, longitude, latitude from route_stop_bridge inner join stops on route_stop_bridge.stop_id = stops.stop_id where (stop_name != 'Way Point' and route_id='\" + id + \"');\";\n        var stops = yield CallDatabase(queryString);\n        queryString = \"select latitude, longitude, occupancy, next_stop from buses where route_id='\" + id + \"' order by bus_id;\";\n        var bus = yield CallDatabase(queryString);\n        navigation.dispatch(CommonActions.navigate({\n          name: 'Home',\n          params: {\n            waypoint: waypoint,\n            bus_id: bus_id,\n            stops: stops,\n            static_time: static_time,\n            bus: bus,\n            dynamic: _dynamic\n          }\n        }));\n      } catch (e) {\n        console.log(\"ERROR ERROR ERROR ERROR ERROR ERROR ERROR\");\n        console.log(e);\n        var _waypoint = route.params[\"waypoint\"] || [];\n        var _bus_id = route.params[\"bus_id\"] || \"\";\n        var _stops = route.params[\"stops\"] || [];\n        var _static_time = route.params[\"static_time\"] || [];\n        var _dynamic2 = route.params[\"dynamic\"] || [];\n        var _bus = route.params[\"bus\"] || [];\n        navigation.dispatch(CommonActions.navigate({\n          name: 'Home',\n          params: {\n            waypoint: _waypoint,\n            bus_id: _bus_id,\n            stops: _stops,\n            static_time: _static_time,\n            bus: _bus,\n            dynamic: _dynamic2\n          }\n        }));\n      }\n    });\n    return function handlePress(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    var autoPressButton = function autoPressButton() {\n      if (selectedId && refresh) {\n        console.log(\"refresh\");\n        handlePress(selectedId);\n      }\n    };\n    var intervalId = setInterval(autoPressButton, 15000);\n    return function () {\n      return clearInterval(intervalId);\n    };\n  }, [selectedId, refresh]);\n  var renderItem = function renderItem(_ref4) {\n    var item = _ref4.item;\n    var backgroundColor = item.id === selectedId ? '#dcdcdc' : item.color;\n    var color = item.id === selectedId ? 'black' : 'white';\n    return _jsx(Item, {\n      item: item,\n      onPress: handlePress,\n      backgroundColor: backgroundColor,\n      textColor: color\n    });\n  };\n  return _jsxs(Swiper, {\n    horizontal: false,\n    loop: false,\n    showsButtons: false,\n    children: [create_Map(navigation, waypoints, bus_ids, markers, buses_loc), _jsx(View, {\n      children: _jsxs(SafeAreaView, {\n        style: styles.item,\n        children: [_jsx(Text, {\n          style: [styles.buttonTitle],\n          children: \"On Campus Routes\"\n        }), _jsx(FlatList, {\n          horizontal: true,\n          data: on_bus_buttons,\n          renderItem: renderItem,\n          keyExtractor: function keyExtractor(item) {\n            return item.id;\n          },\n          extraData: selectedId\n        }), _jsx(Text, {\n          style: [styles.buttonTitle],\n          children: \"Off Campus Routes\"\n        }), _jsx(FlatList, {\n          horizontal: true,\n          data: off_bus_buttons,\n          renderItem: renderItem,\n          keyExtractor: function keyExtractor(item) {\n            return item.id;\n          },\n          extraData: selectedId\n        }), _jsx(TouchableWithoutFeedback, {\n          children: _jsx(Text, {\n            style: styles.buttonTable,\n            onPress: function onPress() {\n              return SetDynamic(!dynamic);\n            },\n            children: dynamic ? 'Show ETA Times' : 'Show Static Times'\n          })\n        }), _jsx(TouchableWithoutFeedback, {\n          onPress: function onPress() {\n            refresh = false;\n            navigation.navigate('Information');\n          },\n          children: _jsx(Image, {\n            source: require(\"./assets/question.png\"),\n            style: styles.question\n          })\n        }), table_view(static_times, eta_times, dynamic)]\n      })\n    })]\n  });\n}\nfunction create_Map(navigation, waypoints, bus_id, markers, buses_loc) {\n  var id = 0;\n  var bus_key = 0;\n  console.log(\"in create map\");\n  var _useState5 = useState([{\n      \"latitude\": 33.00,\n      \"longitude\": -94.00\n    }, {\n      \"latitude\": 37.00,\n      \"longitude\": -96.00\n    }]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    coords = _useState6[0],\n    setCoords = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    pin = _useState8[0],\n    setPin = _useState8[1];\n  suggestRoutes = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      var limit = 5;\n      refresh = false;\n      var queryString = \"select stop_name, MIN(\" + \"distance(s.latitude, s.longitude, \" + coords[0][\"latitude\"] + ',' + coords[0][\"longitude\"] + \")) as min_distance from stops s where stop_name != 'Way Point'\" + \" group by stop_name order by min_distance asc limit \" + limit + \";\";\n      var start = yield CallDatabase(queryString);\n      console.log(queryString);\n      queryString = \"select stop_name, MIN(\" + \"distance(s.latitude, s.longitude, \" + coords[1][\"latitude\"] + ',' + coords[1][\"longitude\"] + \")) as min_distance from stops s where stop_name != 'Way Point'\" + \" group by stop_name order by min_distance asc limit \" + limit + \";\";\n      var end = yield CallDatabase(queryString);\n      var list1 = \"(\";\n      var list2 = \"(\";\n      var list3 = \"(\";\n      for (var i = 0; i < limit; i++) {\n        var s = \"'\" + start[i][\"stop_name\"] + \"'\";\n        var e = \"'\" + end[i][\"stop_name\"] + \"'\";\n        if (s.indexOf('/') !== -1) {\n          s = encodeURIComponent(s);\n        }\n        if (e.indexOf('/') !== -1) {\n          e = encodeURIComponent(e);\n        }\n        list1 += s;\n        list2 += e;\n        list3 += s + \", \" + e;\n        if (i != limit - 1) {\n          list1 += \",\";\n          list2 += \",\";\n          list3 += \",\";\n        }\n      }\n      list1 += \")\";\n      list2 += \")\";\n      list3 += \")\";\n      console.log(list1);\n      console.log(list2);\n      console.log(list3);\n      queryString = \"select route_id, route_name, stops \" + \"from( \" + \"select r.route_id, route_name, STRING_AGG(distinct s.stop_name, ', ') as stops, \" + \"SUM(CASE WHEN stop_name IN \" + list3 + \" THEN 1 ELSE 0 END) AS count3, \" + \"SUM(CASE WHEN stop_name IN \" + list1 + \" THEN 1 ELSE 0 END) AS count1, \" + \"SUM(CASE WHEN stop_name IN \" + list2 + \" THEN 1 ELSE 0 END) AS count2  \" + \"from route_stop_bridge b \" + \"join routes r on r.route_id = b.route_id \" + \"join stops s on b.stop_id = s.stop_id \" + \"where s.stop_name in \" + list3 + \" \" + \"group by r.route_id \" + \") temp \" + \"where(count1 > 0 and count2 > 0 and count3 > 1);\";\n      console.log(queryString);\n      var res = yield CallDatabase(queryString);\n      navigation.dispatch(CommonActions.navigate({\n        name: 'Route Suggestion',\n        params: {\n          res: res\n        }\n      }));\n    });\n    return function suggestRoutes() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(MapView, {\n      style: styles.map,\n      initialRegion: MSC,\n      provider: PROVIDER_GOOGLE,\n      showsUserLocation: true,\n      showsMyLocationButton: true,\n      customMapStyle: [{\n        featureType: \"administrative\",\n        elementType: \"geometry\",\n        stylers: [{\n          visibility: \"off\"\n        }]\n      }, {\n        featureType: \"poi\",\n        stylers: [{\n          visibility: \"off\"\n        }]\n      }, {\n        featureType: \"road\",\n        elementType: \"labels.icon\",\n        stylers: [{\n          visibility: \"off\"\n        }]\n      }, {\n        featureType: \"transit\",\n        stylers: [{\n          visibility: \"off\"\n        }]\n      }],\n      onPress: function onPress(e) {\n        var cords = pin ? [coords[0], e.nativeEvent.coordinate] : [e.nativeEvent.coordinate, coords[1]];\n        console.log(\"\\n trial\");\n        console.log(e.nativeEvent.coordinate);\n        console.log('\\n');\n        setCoords(cords);\n        setPin(!pin);\n      },\n      children: [coords.map(function (marker) {\n        return _jsx(Marker, {\n          coordinate: marker,\n          title: id % 2 == 0 ? \"Start\" : \"End\",\n          pinColor: id % 2 == 0 ? \"blue\" : \"red\",\n          draggable: true\n        }, id++);\n      }), markers.map(function (marker) {\n        return _jsxs(Marker, {\n          coordinate: {\n            latitude: parseFloat(marker.latitude),\n            longitude: parseFloat(marker.longitude)\n          },\n          pinColor: marker.timed_stop ? buses[bus_id][\"color\"] : buses[bus_id][\"color\"],\n          children: [marker.timed_stop ? _jsx(Image, {\n            source: require(\"./assets/fast-time.png\"),\n            style: {\n              height: 35,\n              width: 35\n            }\n          }) : _jsx(Image, {\n            source: require(\"./assets/bus-stop.png\"),\n            style: {\n              height: 35,\n              width: 35\n            }\n          }), _jsx(Callout, {\n            style: {\n              justifyContent: 'center'\n            },\n            children: _jsx(Text, {\n              style: {\n                width: 100,\n                textAlign: 'center'\n              },\n              children: marker.stop_name\n            })\n          })]\n        }, id++);\n      }), buses_loc.map(function (bus) {\n        return _jsxs(Marker, {\n          coordinate: {\n            latitude: bus.latitude,\n            longitude: bus.longitude\n          },\n          children: [_jsx(Image, {\n            source: require(\"./assets/bus.jpg\"),\n            style: {\n              height: 50,\n              width: 50\n            }\n          }), _jsx(Callout, {\n            children: _jsx(Text, {\n              style: {\n                width: 150,\n                textAlign: 'center'\n              },\n              children: \"People on board: \" + bus.occupancy + \"\\n\" + Math.round(bus.occupancy / 75 * 100) + \"% full\\nNext stop: \" + bus.next_stop\n            })\n          })]\n        }, bus_key++);\n      }), _jsx(Polyline, {\n        coordinates: waypoints,\n        strokeColor: buses[bus_id][\"color\"],\n        strokeWidth: 6\n      })]\n    }), _jsx(StatusBar, {\n      style: \"auto\"\n    }), _jsx(Image, {\n      style: {\n        width: 80,\n        height: 50,\n        marginBottom: 40\n      },\n      source: require(\"./assets/bar.png\")\n    }), _jsx(TouchableOpacity, {\n      style: styles.mapButton,\n      onPress: suggestRoutes,\n      children: _jsx(Image, {\n        style: {\n          width: 40,\n          height: 40,\n          backgroundColor: '#72b2fc',\n          borderRadius: 3\n        },\n        source: require(\"./assets/test2.png\")\n      })\n    })]\n  });\n}\nfunction CallDatabase(_x2) {\n  return _CallDatabase.apply(this, arguments);\n}\nfunction _CallDatabase() {\n  _CallDatabase = _asyncToGenerator(function* (query) {\n    try {\n      var fetchString = \"http://us-lvm1.southcentralus.cloudapp.azure.com:3001/\" + query;\n      var response = yield fetch(fetchString, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      var json = undefined;\n      if (response.status === 200) {\n        json = yield response.json();\n      } else {\n        console.log(response.status);\n        console.log(response);\n      }\n      return json;\n    } catch (err) {\n      console.log(err);\n    }\n  });\n  return _CallDatabase.apply(this, arguments);\n}\nexport var styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  mapButton: {\n    position: 'absolute',\n    top: 5,\n    left: 5,\n    backgroundColor: '#72b2fc',\n    borderColor: 'black',\n    borderBottomColor: 'black',\n    borderRadius: 30,\n    borderWidth: 1,\n    width: 60,\n    height: 60,\n    justifyContent: 'center',\n    alignItems: 'center',\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.5,\n    shadowRadius: 3.54\n  },\n  map: {\n    width: '100%',\n    height: '87%',\n    marginBottom: 40\n  },\n  link: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  item: _objectSpread({}, Platform.select({\n    ios: {\n      padding: 20,\n      marginHorizontal: 8,\n      borderRadius: 10\n    },\n    android: {\n      padding: 15,\n      marginHorizontal: 4,\n      borderRadius: 10\n    }\n  })),\n  title: {\n    fontSize: 24\n  },\n  buttonTitle: _objectSpread({}, Platform.select({\n    ios: {\n      fontSize: 24,\n      fontWeight: 'bold',\n      marginBottom: 20,\n      marginTop: 20\n    },\n    android: {\n      fontSize: 24,\n      fontWeight: 'bold',\n      marginBottom: 10,\n      marginTop: 10\n    }\n  })),\n  filterbutton: _objectSpread({}, Platform.select({\n    ios: {\n      top: -50,\n      left: 200\n    },\n    android: {\n      padding: 12,\n      top: -50,\n      left: 190\n    }\n  })),\n  buttonTable: _objectSpread({}, Platform.select({\n    ios: {\n      position: 'relative',\n      zIndex: 2,\n      backgroundColor: '#E7E6E1',\n      color: '#500000',\n      fontWeight: 'bold',\n      width: 155,\n      height: 45,\n      padding: 12,\n      top: 40,\n      left: 0,\n      borderWidth: 1\n    },\n    android: {\n      position: 'relative',\n      zIndex: 2,\n      backgroundColor: '#E7E6E1',\n      color: '#500000',\n      fontWeight: 'bold',\n      width: 145,\n      height: 45,\n      padding: 12,\n      top: 40,\n      left: 0,\n      borderWidth: 1\n    }\n  })),\n  question: _objectSpread({}, Platform.select({\n    ios: {\n      position: 'relative',\n      zIndex: 1,\n      backgroundColor: '#E7E6E1',\n      top: -5,\n      left: 155,\n      width: 45,\n      height: 45,\n      borderWidth: 1,\n      padding: 12\n    },\n    android: {\n      position: 'relative',\n      zIndex: 1,\n      backgroundColor: '#E7E6E1',\n      padding: 12,\n      top: -5,\n      left: 145,\n      width: 45,\n      height: 45,\n      borderWidth: 1\n    }\n  }))\n});\nexport function table_view(time_array_static, time_array_eta, dynamic) {\n  if (!(time_array_static === undefined || time_array_eta === undefined)) {\n    return _jsx(View, {\n      children: sort_times(time_array_static, time_array_eta, dynamic)\n    });\n  } else {\n    return _jsx(View, {});\n  }\n}","map":{"version":3,"names":["React","useState","useEffect","MapView","PROVIDER_GOOGLE","Marker","Polyline","Callout","StatusBar","StyleSheet","Text","View","Platform","FlatList","SafeAreaView","TouchableOpacity","TouchableWithoutFeedback","Image","ScrollView","Modal","sort_times","create_table","useNavigation","CommonActions","Swiper","buses","on_bus_buttons","off_bus_buttons","jsx","_jsx","jsxs","_jsxs","MSC","latitude","longitude","latitudeDelta","longitudeDelta","queryString","refresh","updateRefresh","newValue","Item","_ref","item","onPress","backgroundColor","textColor","id","style","styles","children","title","color","Map","_ref2","navigation","route","_useState","_useState2","_slicedToArray","selectedId","setSelectedId","_useState3","_useState4","dynamic","SetDynamic","unsubscribe","addListener","waypoints","bus_ids","static_times","eta_times","markers","buses_loc","params","undefined","handlePress","_ref3","_asyncToGenerator","console","log","waypoint","CallDatabase","bus_id","static_time","stops","bus","dispatch","navigate","name","e","_x","apply","arguments","autoPressButton","intervalId","setInterval","clearInterval","renderItem","_ref4","horizontal","loop","showsButtons","create_Map","buttonTitle","data","keyExtractor","extraData","buttonTable","source","require","question","table_view","bus_key","_useState5","_useState6","coords","setCoords","_useState7","_useState8","pin","setPin","suggestRoutes","_ref5","limit","start","end","list1","list2","list3","i","s","indexOf","encodeURIComponent","res","container","map","initialRegion","provider","showsUserLocation","showsMyLocationButton","customMapStyle","featureType","elementType","stylers","visibility","cords","nativeEvent","coordinate","marker","pinColor","draggable","parseFloat","timed_stop","height","width","justifyContent","textAlign","stop_name","occupancy","Math","round","next_stop","coordinates","strokeColor","strokeWidth","marginBottom","mapButton","borderRadius","_x2","_CallDatabase","query","fetchString","response","fetch","method","headers","Accept","json","status","err","create","flex","alignItems","position","top","left","borderColor","borderBottomColor","borderWidth","shadowColor","shadowOffset","shadowOpacity","shadowRadius","link","_objectSpread","select","ios","padding","marginHorizontal","android","fontSize","fontWeight","marginTop","filterbutton","zIndex","time_array_static","time_array_eta"],"sources":["C:/Users/rdoer/my-app/BusDetector/front/MapClass.js"],"sourcesContent":["\r\nimport React, {useState, useEffect} from 'react';\r\nimport MapView from 'react-native-maps';\r\nimport { PROVIDER_GOOGLE, Marker, Polyline, Callout } from 'react-native-maps';\r\n\r\nimport { StatusBar } from 'expo-status-bar';\r\nimport { StyleSheet, Text, View, Platform, FlatList, SafeAreaView, TouchableOpacity, TouchableWithoutFeedback, Image, ScrollView, Modal } from 'react-native';\r\n\r\nimport {sort_times, create_table} from './table.js';\r\nimport { useNavigation, CommonActions } from '@react-navigation/native';\r\n\r\nimport Swiper from 'react-native-swiper';\r\n\r\nimport buses from \"./buses.json\";\r\nimport on_bus_buttons from \"./bus-on-campus-button.json\";\r\nimport off_bus_buttons from \"./bus-off-campus-buttons.json\";\r\n\r\nconst MSC = {\r\n    latitude: 30.6123,\r\n    longitude: -96.3415,\r\n    latitudeDelta: 0.02,\r\n    longitudeDelta: 0.02,\r\n}\r\n\r\nvar queryString = \"\";\r\nexport var refresh = true;\r\n\r\n// this is literally only used in App.js to stop the announcments page from refreshing while a user is on it\r\nexport function updateRefresh(newValue) {\r\n  refresh = newValue;\r\n}\r\n\r\n\r\n// this is for the button list\r\nconst Item = ({ item, onPress, backgroundColor, textColor }) => (\r\n  <TouchableOpacity onPress={() => onPress(item.id)} style={[styles.item, { backgroundColor }]}>\r\n    <Text style={[styles.title, { color: textColor }]}>{item.id}</Text>\r\n  </TouchableOpacity>\r\n);\r\n\r\n\r\n\r\nexport function Map({ navigation, route }) {\r\n  //const { waypoints } = route.params || []; //route.params\r\n  \r\n  const [selectedId, setSelectedId] = useState();\r\n  const [dynamic, SetDynamic] = useState(true);\r\n  // const [refresh, setRefresh] = useState(true);\r\n  \r\n\r\n  // listens for when the map page is navigated to and sets refresh to true\r\n  useEffect(() => {\r\n    const unsubscribe = navigation.addListener('focus', () => {\r\n      // setRefresh(true);\r\n      refresh = true;\r\n    });\r\n\r\n    return unsubscribe;\r\n  }, [navigation]);\r\n   \r\n  \r\n  var waypoints;\r\n  var bus_ids = \"01\";\r\n  var static_times;\r\n  var eta_times;\r\n  var markers;\r\n  var buses_loc;\r\n  //console.log(route.params);\r\n  if (route.params === undefined) {\r\n    waypoints = route.params || [];\r\n    bus_ids = \"01\";\r\n    static_times = [];\r\n    markers = [{ 'stop_name': 'test', 'timed_stop': true, 'longitude': '60.001', 'latitude':'60.001' }];\r\n    eta_times = [];\r\n    buses_loc = [];\r\n  } else {\r\n    waypoints  = route.params[\"waypoint\"] || [];\r\n    bus_ids = route.params[\"bus_id\"] || \"\";\r\n    markers = route.params[\"stops\"] || [];\r\n    static_times = route.params[\"static_time\"] || [];\r\n    eta_times = route.params[\"dynamic\"] || [];\r\n    buses_loc = route.params[\"bus\"] || [];\r\n\r\n  }\r\n  \r\n  // gets the route number that is selected and processes it\r\n  handlePress = async (id) => {\r\n    setSelectedId(id);\r\n    console.log(id);\r\n    try {\r\n      queryString = \"Select latitude, longitude from public.stops inner join public.route_stop_bridge on route_stop_bridge.stop_id=stops.stop_id where (route_id='\" + id + \"' and rank is not null) order by route_stop_bridge.rank asc;\";\r\n      \r\n      // CallDatabase(queryString);\r\n      const waypoint = await CallDatabase(queryString);\r\n      const bus_id = id;\r\n\r\n      //Querry for static tables & dynamic tables\r\n      queryString = \"Select static_time, stop_name, key from static_table where route_id='\" + id + \"' order by (key, index) asc\";\r\n      const static_time = await CallDatabase(queryString);\r\n\r\n\r\n      queryString = \"Select eta_time, stop_name, stops.stop_id, raw_time from stops inner join route_stop_bridge on route_stop_bridge.stop_id = stops.stop_id where (not stop_name='Way Point' and route_id='\" + id + \"') order by (stops.stop_id, raw_time) asc\";\r\n      const dynamic = await CallDatabase(queryString);\r\n\r\n      // get the stops from the database\r\n      queryString = \"select distinct stop_name, timed_stop, longitude, latitude from route_stop_bridge inner join stops on route_stop_bridge.stop_id = stops.stop_id where (stop_name != 'Way Point' and route_id='\" + id + \"');\";\r\n      const stops = await CallDatabase(queryString);\r\n      // console.log(stops)\r\n\r\n      //get the bus locations from the database\r\n      queryString = \"select latitude, longitude, occupancy, next_stop from buses where route_id='\" + id + \"' order by bus_id;\";\r\n      const bus = await CallDatabase(queryString);\r\n      //console.log(bus);\r\n\r\n      // Navigate to the Map screen and pass the selected waypoints as a parameter\r\n      navigation.dispatch(\r\n        CommonActions.navigate({\r\n          name: 'Home',\r\n\r\n          params: { waypoint, bus_id, stops, static_time, bus, dynamic },\r\n\r\n        }));\r\n    } catch (e) {\r\n      console.log(\"ERROR ERROR ERROR ERROR ERROR ERROR ERROR\")\r\n      console.log(e);\r\n\r\n      const waypoint = route.params[\"waypoint\"] || [];\r\n      const bus_id = route.params[\"bus_id\"] || \"\";\r\n      const stops = route.params[\"stops\"] || [];\r\n      const static_time = route.params[\"static_time\"] || [];\r\n      const dynamic = route.params[\"dynamic\"] || [];\r\n      const bus  = route.params[\"bus\"] || [];\r\n      navigation.dispatch(\r\n        CommonActions.navigate({\r\n          name: 'Home',\r\n\r\n          params: { waypoint, bus_id, stops, static_time, bus, dynamic },\r\n\r\n        }));\r\n\r\n    }\r\n    \r\n\r\n  };\r\n\r\n  // requeries for bus routes and etas\r\n  // refreshPress = async (id) => {\r\n  //   const bus_id = id\r\n\r\n  //   queryString = \"Select eta_time, stop_name, stops.stop_id, raw_time from stops inner join route_stop_bridge on route_stop_bridge.stop_id = stops.stop_id where (not stop_name='Way Point' and route_id='\" + id + \"') order by (stops.stop_id, raw_time) asc\";\r\n  //   const dynamic = await CallDatabase(queryString); \r\n\r\n  //   //get the bus locations from the database\r\n  //   queryString = \"select latitude, longitude, occupancy from buses where route_id='\" + id + \"';\";\r\n  //   const bus = await CallDatabase(queryString);\r\n  //   console.log(bus);\r\n\r\n  //   // set params to route, stops, and static time selected by the user\r\n  //   const waypoint = waypoints;\r\n  //   const stops = markers;\r\n  //   const static_time = static_times;\r\n    \r\n  //   // Navigate to the Map screen and pass the selected waypoints as a parameter\r\n  //   navigation.dispatch(\r\n  //     CommonActions.navigate({\r\n  //       name: 'Home',\r\n\r\n  //       params: {waypoint, bus_id, stops, static_time, bus, dynamic}, \r\n\r\n  //     })\r\n  //   )\r\n  // };\r\n\r\n  // refreshes the page\r\n  useEffect(() => {\r\n    // Function to automatically press the button every 15 seconds\r\n    const autoPressButton = () => {\r\n      // Check if an item is selected\r\n      //console.log(\"selectedId is outside the if: \" + selectedId);\r\n      if (selectedId && refresh) {\r\n        // Simulate button press by calling the onPress function with the selected item\r\n        //console.log(\"selectedId is inside the if: \" + selectedId);\r\n        console.log(\"refresh\");\r\n        handlePress(selectedId);\r\n      }\r\n    };\r\n\r\n    // Set up the interval to auto-press the button every 15 seconds\r\n    const intervalId = setInterval(autoPressButton, 15000);\r\n\r\n    // Clean up the interval when the component unmounts\r\n    return () => clearInterval(intervalId);\r\n  }, [selectedId, refresh]);\r\n\r\n  const renderItem = ({ item }) => {\r\n    const backgroundColor = item.id === selectedId ? '#dcdcdc' : item.color;\r\n    const color = item.id === selectedId ? 'black' : 'white';\r\n\r\n    return (\r\n      <Item\r\n        item={item}\r\n        onPress={handlePress}\r\n        backgroundColor={backgroundColor}\r\n        textColor={color}\r\n      />\r\n    );\r\n    \r\n  }\r\n    return (\r\n        <Swiper \r\n          horizontal={false} \r\n          loop={false} \r\n          showsButtons={false}\r\n        \r\n        >\r\n          \r\n          {create_Map(navigation, waypoints, bus_ids, markers, buses_loc)}\r\n        <View>\r\n          <SafeAreaView style={styles.item}>\r\n\r\n            <Text style={[styles.buttonTitle]}>On Campus Routes</Text>\r\n            <FlatList\r\n              horizontal={true}\r\n              data={on_bus_buttons}\r\n              renderItem={renderItem}\r\n              keyExtractor={item => item.id}\r\n              extraData={selectedId}\r\n            />\r\n            <Text style={[styles.buttonTitle]}>Off Campus Routes</Text>\r\n            <FlatList\r\n              horizontal={true}\r\n              data={off_bus_buttons}\r\n              renderItem={renderItem}\r\n              keyExtractor={item => item.id}\r\n              extraData={selectedId}\r\n            />\r\n            \r\n            <TouchableWithoutFeedback >\r\n                <Text style={styles.buttonTable}   onPress={() => SetDynamic(!dynamic)}   >\r\n                {dynamic ? 'Show ETA Times' : 'Show Static Times'}\r\n                </Text> \r\n            </TouchableWithoutFeedback>\r\n            <TouchableWithoutFeedback onPress={() =>{refresh = false; navigation.navigate('Information')}}>\r\n              <Image source={require('./assets/question.png')} style={styles.question} />\r\n            </TouchableWithoutFeedback>\r\n            \r\n            {\r\n            table_view(static_times, eta_times, dynamic)\r\n            }\r\n            \r\n          </SafeAreaView> \r\n          </View>\r\n        </Swiper> \r\n    );\r\n}\r\n\r\nfunction create_Map(navigation, waypoints, bus_id, markers, buses_loc) {\r\n  \r\n  var id = 0;\r\n  var bus_key = 0;\r\n  console.log(\"in create map\")\r\n  // console.log(markers)\r\n  const [coords, setCoords] = useState([{ \"latitude\": 33.00, \"longitude\": -94.00 },\r\n    { \"latitude\": 37.00, \"longitude\": -96.00 }]);\r\n  const [pin, setPin] = useState(false);\r\n\r\n  suggestRoutes = async () => {\r\n    // Write \r\n    // console.log(coords[0]);\r\n    // console.log(coords[1]);\r\n\r\n    var limit = 5;\r\n    refresh = false;\r\n\r\n    var queryString = \"select stop_name, MIN(\" + \"distance(s.latitude, s.longitude, \" + coords[0][\"latitude\"] + ',' + \r\n    coords[0][\"longitude\"] + \")) as min_distance from stops s where stop_name != 'Way Point'\" +\r\n    \" group by stop_name order by min_distance asc limit \" + limit + \";\";\r\n    const start = await CallDatabase(queryString);\r\n    console.log(queryString);\r\n\r\n\r\n    queryString = \"select stop_name, MIN(\" + \"distance(s.latitude, s.longitude, \" + coords[1][\"latitude\"] + ',' +\r\n      coords[1][\"longitude\"] + \")) as min_distance from stops s where stop_name != 'Way Point'\" +\r\n      \" group by stop_name order by min_distance asc limit \" + limit + \";\";\r\n      //console.log(queryString);\r\n    const end = await CallDatabase(queryString);\r\n   \r\n\r\n    var list1 = \"(\";\r\n    var list2 = \"(\";\r\n    var list3 = \"(\";\r\n    for (var i = 0; i < limit; i++) {\r\n      var s = \"'\" + start[i][\"stop_name\"] + \"'\";\r\n      var e = \"'\" + end[i][\"stop_name\"] + \"'\";\r\n\r\n      if (s.indexOf('/') !== -1) {\r\n        s = encodeURIComponent(s);\r\n        //s =  s;\r\n      } \r\n      if (e.indexOf('/') !== -1) {\r\n        e = encodeURIComponent(e);\r\n        //e = e;\r\n      } \r\n\r\n      list1 +=  s;\r\n      list2 +=  e;\r\n      list3 +=  s + \", \" + e;\r\n      if (i != (limit -1)) {\r\n        list1 += \",\";\r\n        list2 += \",\";\r\n        list3 += \",\";\r\n      }\r\n    }\r\n    list1 += \")\";\r\n    list2 += \")\";\r\n    list3 += \")\";\r\n    console.log(list1);\r\n    console.log(list2);\r\n    console.log(list3);\r\n    // Create the needed functions in suggestion.js and import them for here to make it easier to read\r\n    \r\n    \r\n    // console.log(\"Start\\n End\");\r\n    // console.log(start)\r\n    // console.log(end);\r\n    \r\n    queryString = \"select route_id, route_name, stops \" +\r\n    \"from( \" +\r\n      \"select r.route_id, route_name, STRING_AGG(distinct s.stop_name, ', ') as stops, \" +\r\n      \"SUM(CASE WHEN stop_name IN \" + list3 + \" THEN 1 ELSE 0 END) AS count3, \" +\r\n      \"SUM(CASE WHEN stop_name IN \" + list1 + \" THEN 1 ELSE 0 END) AS count1, \" +\r\n      \"SUM(CASE WHEN stop_name IN \" + list2 + \" THEN 1 ELSE 0 END) AS count2  \" +\r\n\t\t\"from route_stop_bridge b \" + \r\n\t\t\"join routes r on r.route_id = b.route_id \" +\r\n\t\t\"join stops s on b.stop_id = s.stop_id \" +\r\n    \"where s.stop_name in \" + list3 + \" \" +\r\n\t\t\"group by r.route_id \" +\r\n    \") temp \" +\r\n    \"where(count1 > 0 and count2 > 0 and count3 > 1);\";\r\n    \r\n    \r\n\r\n\r\n    console.log(queryString);\r\n    const res = await CallDatabase(queryString);\r\n    \r\n\r\n    navigation.dispatch(\r\n      CommonActions.navigate({\r\n        name: 'Route Suggestion',\r\n        params: { res },\r\n        }));\r\n    }\r\n  \r\n\r\n  return (\r\n    <View style={styles.container}>\r\n\r\n      {\r\n        // Google API block\r\n        <MapView\r\n          style={styles.map}\r\n          initialRegion={MSC}\r\n          provider={PROVIDER_GOOGLE}\r\n          showsUserLocation={true}\r\n          showsMyLocationButton={true}\r\n          customMapStyle={[\r\n            {\r\n              featureType: \"administrative\",\r\n              elementType: \"geometry\",\r\n              stylers: [\r\n              {\r\n                  visibility: \"off\"\r\n              }\r\n              ]\r\n            },\r\n            {\r\n              featureType: \"poi\",\r\n              stylers: [\r\n                {\r\n                  visibility: \"off\"\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              featureType: \"road\",\r\n              elementType: \"labels.icon\",\r\n              stylers: [\r\n                {\r\n                  visibility: \"off\"\r\n                }\r\n              ]\r\n            },\r\n            {\r\n              featureType: \"transit\",\r\n              stylers: [\r\n                {\r\n                  visibility: \"off\"\r\n                }\r\n              ]\r\n            }\r\n          ]}\r\n\r\n          onPress= {(e) => {\r\n            var cords = pin ? [coords[0], e.nativeEvent.coordinate] : [e.nativeEvent.coordinate, coords[1]]\r\n            //coords[counter ? 0 : 1] = e.nativeEvent.coordinate;\r\n            console.log(\"\\n trial\");\r\n            console.log(e.nativeEvent.coordinate);\r\n            console.log('\\n');\r\n\r\n            setCoords(cords);\r\n            // coords = cords;\r\n            setPin(!pin);\r\n            // pin = !pin;\r\n        }}\r\n        >\r\n          {coords.map(marker => (\r\n          <Marker\r\n            key = {id++}\r\n            coordinate={marker}\r\n            title={id%2==0 ? \"Start\" : \"End\"}\r\n            pinColor={id%2==0 ? \"blue\" : \"red\"}\r\n            draggable={true}\r\n          />\r\n          ))}\r\n          \r\n            \r\n          {markers.map(marker => (\r\n            <Marker\r\n              key={id++}\r\n\r\n              coordinate={\r\n                {\r\n                  latitude: parseFloat(marker.latitude),\r\n                  longitude: parseFloat(marker.longitude),\r\n                }\r\n              }\r\n\r\n              pinColor={marker.timed_stop ? buses[bus_id][\"color\"] : buses[bus_id][\"color\"]}\r\n\r\n            >\r\n              \r\n              {marker.timed_stop ? <Image source={require(\"./assets/fast-time.png\")} style={{ height: 35, width: 35 }} /> : <Image source={require(\"./assets/bus-stop.png\")} style={{ height: 35, width: 35 }} />}\r\n              <Callout style={{justifyContent: 'center'}}>\r\n                <Text style={{width: 100, textAlign: 'center'}}>{marker.stop_name}</Text>\r\n              </Callout>\r\n            </Marker>\r\n          ))}\r\n\r\n          {\r\n            buses_loc.map(bus => (\r\n              <Marker\r\n                key={bus_key++}\r\n\r\n                coordinate={\r\n                  {\r\n                    latitude: bus.latitude,\r\n                    longitude: bus.longitude,\r\n                  }\r\n                }\r\n\r\n              >\r\n                <Image source={require(\"./assets/bus.jpg\")} style={{ height: 50, width: 50 }} />\r\n                <Callout>\r\n                  <Text style={{width: 150, textAlign: 'center'}}>{\"People on board: \" + bus.occupancy + \"\\n\" + Math.round((bus.occupancy / 75) * 100) + \"% full\\nNext stop: \" + bus.next_stop}</Text>\r\n                </Callout>\r\n\r\n              </Marker>\r\n            ))\r\n          }\r\n          \r\n\r\n          <Polyline\r\n            coordinates={waypoints}\r\n\r\n            strokeColor={buses[bus_id][\"color\"]}\r\n            strokeWidth={6} />\r\n\r\n          \r\n\r\n        </MapView>\r\n        \r\n      }\r\n      <StatusBar style=\"auto\" />\r\n      <Image\r\n      style={{ width: 80, height: 50, marginBottom: 40 }}\r\n      source={require('./assets/bar.png')}\r\n    />\r\n    <TouchableOpacity style={styles.mapButton} onPress={suggestRoutes} >\r\n        <Image \r\n          style={{ width: 40, height: 40, backgroundColor:'#72b2fc', borderRadius:3, }}\r\n          source={require('./assets/test2.png')}/>\r\n      </TouchableOpacity> \r\n    </View>\r\n  )\r\n  \r\n}\r\n\r\n\r\n// API connection function\r\nasync function CallDatabase(query) {\r\n    try {\r\n      const fetchString = \"http://us-lvm1.southcentralus.cloudapp.azure.com:3001/\" + query;\r\n        const response = await fetch(fetchString,\r\n            {\r\n                method: 'GET',\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                }\r\n            });\r\n\r\n        let json = undefined;\r\n\r\n        if (response.status === 200) {\r\n            json = await response.json();\r\n           // console.log(json);                       // UNCOMMENT TO LOG JSON RESPONSES\r\n            // waypoints = json;\r\n        } else {\r\n            console.log(response.status);\r\n            console.log(response);\r\n        }\r\n\r\n        return json;\r\n    } catch (err) {\r\n        console.log(err)\r\n    }\r\n\r\n}\r\nexport const styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    mapButton: {\r\n      position: 'absolute',\r\n      top:5,\r\n      left:5,\r\n      backgroundColor: '#72b2fc', //#72b2fc\r\n      borderColor: 'black',\r\n      borderBottomColor: 'black',\r\n      borderRadius: 30,\r\n      borderWidth: 1,\r\n      width: 60,\r\n      height: 60,\r\n      justifyContent: 'center',\r\n      alignItems: 'center',\r\n      shadowColor: \"#000\",\r\n      shadowOffset: {\r\n        width: 0,\r\n        height: 2,\r\n      },\r\n      shadowOpacity: 0.5,\r\n      shadowRadius: 3.54,\r\n    },\r\n    map: {\r\n        width: '100%',\r\n        height: '87%',\r\n        marginBottom: 40,\r\n    },\r\n    link: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n    },\r\n    item: {\r\n      ...Platform.select({\r\n        ios: {\r\n          padding: 20,\r\n          marginHorizontal: 8,\r\n          borderRadius: 10,\r\n        },\r\n        android: {\r\n          padding: 15,\r\n          marginHorizontal: 4,\r\n          borderRadius: 10,\r\n        },\r\n      }),\r\n        \r\n      },\r\n      title: {\r\n        fontSize: 24,\r\n      },\r\n      buttonTitle: {\r\n        ...Platform.select({\r\n          ios: {\r\n            fontSize: 24,\r\n            fontWeight: 'bold',\r\n            marginBottom: 20,\r\n            marginTop: 20,\r\n          },\r\n          android: {\r\n            fontSize: 24,\r\n            fontWeight: 'bold',\r\n            marginBottom: 10,\r\n            marginTop: 10,\r\n          },\r\n        }),\r\n  \r\n      },\r\n      filterbutton: {\r\n        ...Platform.select({\r\n          ios: {\r\n\r\n            top: -50,\r\n            left: 200,\r\n          },\r\n          android: {\r\n\r\n            padding: 12,\r\n            top: -50,\r\n            left: 190,\r\n          },\r\n        }),\r\n      },\r\n      buttonTable: {\r\n        ...Platform.select({\r\n          ios: {\r\n            position: 'relative',\r\n            zIndex: 2,\r\n            backgroundColor: '#E7E6E1',\r\n            color: '#500000',\r\n            fontWeight: 'bold',\r\n            width: 155,\r\n            height: 45,\r\n            padding: 12,\r\n            top: 40,\r\n            left: 0,\r\n            borderWidth: 1,\r\n          },\r\n          android: {\r\n            position: 'relative',\r\n            zIndex: 2,\r\n            backgroundColor: '#E7E6E1',\r\n            color: '#500000',\r\n            fontWeight: 'bold',\r\n            width: 145,\r\n            height: 45,\r\n            padding: 12,\r\n            top: 40,\r\n            left: 0,\r\n            borderWidth: 1,\r\n          },\r\n        }),\r\n        \r\n        \r\n      },\r\n      question: {\r\n        ...Platform.select({\r\n          ios: {\r\n            position: 'relative',\r\n            zIndex: 1,\r\n            backgroundColor: '#E7E6E1',\r\n            top: -5,\r\n            left: 155,\r\n            width: 45,\r\n            height: 45,\r\n            borderWidth: 1,\r\n            padding: 12,\r\n          },\r\n          android: {\r\n            position: 'relative',\r\n            zIndex: 1,\r\n            backgroundColor: '#E7E6E1',\r\n            padding: 12,\r\n            top: -5,\r\n            left: 145,\r\n            width: 45,\r\n            height: 45,\r\n            borderWidth: 1,\r\n          },\r\n        }),\r\n        \r\n        \r\n      }\r\n});\r\n\r\nexport function table_view(time_array_static, time_array_eta, dynamic) {\r\n  \r\n  if (!(time_array_static === undefined || time_array_eta === undefined)) { // \r\n    \r\n    return (\r\n      <View>\r\n        {sort_times(time_array_static, time_array_eta, dynamic)\r\n        }\r\n\r\n      </View>\r\n    );\r\n  } else {\r\n    return <View></View>;\r\n  }\r\n    \r\n\r\n}\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}