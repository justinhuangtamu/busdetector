{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport var theme = StyleSheet.create({\n  base: {\n    fontFamily: 'Cochin'\n  },\n  title: {\n    fontSize: 20,\n    marginBottom: 20,\n    fontWeight: 'bold'\n  },\n  scroll: {\n    marginHorizontal: 20\n  },\n  view: {\n    marginBottom: 10.\n  },\n  info: {\n    marginTop: 20,\n    marginHorizontal: 20\n  },\n  infoText: {\n    fontSize: 16,\n    marginBottom: 20\n  },\n  categories: {\n    fontSize: 8,\n    color: \"grey\",\n    marginTop: 5\n  }\n});\nfunction get_Announcements2(news) {\n  hold = news[\"Items\"];\n  var announcements = [];\n  announcements.push(_jsx(View, {\n    style: theme.title\n  }, 0));\n  console.log(hold);\n  for (var i = 0; i < hold.length; i++) {\n    var summary = hold[i][\"Summary\"][\"Text\"];\n    announcements.push(_jsxs(View, {\n      style: theme.view,\n      children: [_jsx(Text, {\n        style: theme.title,\n        children: hold[i][\"Title\"][\"Text\"]\n      }), _jsx(Text, {\n        children: fix_summary(summary)\n      })]\n    }, i + 1));\n  }\n  if (hold.length == 0) {\n    announcements.push(_jsx(View, {\n      children: _jsx(Text, {\n        style: theme.title,\n        children: \"All Buses Running Smoothly\"\n      })\n    }, 1));\n  }\n  return announcements;\n}\nfunction fix_summary(sum) {\n  if (sum.includes('</picture>')) {\n    var hold = sum.match(\"img src=\\\"(.*)\\\" alt=\");\n    var pic = hold[1];\n    hold = sum.split(\"</picture>\");\n    hold = hold[1].split(\"<br />\");\n    var arr = [];\n    arr.push(_jsx(Image, {\n      style: {\n        width: 300,\n        height: 300\n      },\n      source: {\n        uri: pic\n      }\n    }, 1));\n    for (var i = 0; i < hold.length; i++) {\n      var line = hold[i].replace('&#160;', '') + '\\n';\n      arr.push(line.trimStart());\n    }\n    return arr;\n  } else {\n    return _jsx(Text, {\n      children: sum\n    });\n  }\n}\nexport function Trial() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    news = _useState2[0],\n    setNews = _useState2[1];\n  useEffect(function () {\n    var newsArr = function () {\n      var _ref = _asyncToGenerator(function* () {\n        try {\n          var fetchString = \"https://transport.tamu.edu/BusRoutesFeed/api/Announcements\";\n          var response = yield fetch(fetchString, {\n            method: 'GET',\n            headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json'\n            }\n          });\n          var json = null;\n          if (response.status === 200) {\n            json = yield response.json();\n          } else {\n            console.log(response.status);\n          }\n          return json;\n        } catch (err) {\n          console.log(err);\n        }\n      });\n      return function newsArr() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    newsArr().then(setNews);\n  }, []);\n  console.log(news);\n  if (news.length == 0) {\n    console.log(\"News is Undefined\");\n    return _jsx(View, {\n      style: theme.info,\n      children: _jsx(Text, {\n        style: theme.title,\n        children: \"All Buses Running Smoothly\"\n      })\n    });\n  } else {\n    return get_Announcements2(news);\n  }\n}\nexport function get_Announcements() {\n  return Trial();\n}\nexport function Information() {\n  return _jsxs(View, {\n    style: theme.info,\n    children: [_jsx(Text, {\n      style: theme.title,\n      children: \"Static VS ETA Times\"\n    }), _jsx(Text, {\n      style: theme.infoText,\n      children: \"Static times are scheduled times provided by A&M. These are times that the bus will wait for at each stop. Some stops do not have a scheduled time.\"\n    }), _jsx(Text, {\n      style: theme.infoText,\n      children: \"ETA Times are create using google maps and are intended to be more accurate stop times. These times are calculated every minute to ensure they are updated. The ETA table also provides predicted times for stops along each bus route that are not scheduled stops.\"\n    }), _jsx(Text, {\n      style: theme.title,\n      children: \"Credits\"\n    }), _jsx(Text, {\n      style: theme.infoText,\n      children: \"Icons made by Freepik from www.flaticon.com\"\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","Image","jsx","_jsx","jsxs","_jsxs","theme","create","base","fontFamily","title","fontSize","marginBottom","fontWeight","scroll","marginHorizontal","view","info","marginTop","infoText","categories","color","get_Announcements2","news","hold","announcements","push","style","console","log","i","length","summary","children","fix_summary","sum","includes","match","pic","split","arr","width","height","source","uri","line","replace","trimStart","Trial","_useState","_useState2","_slicedToArray","setNews","newsArr","_ref","_asyncToGenerator","fetchString","response","fetch","method","headers","Accept","json","status","err","apply","arguments","then","get_Announcements","Information"],"sources":["C:/Users/rdoer/my-app/BusDetector/front/News.js"],"sourcesContent":["\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nimport { StyleSheet, Text, View, Image } from 'react-native';\r\n//import news_ex from './temp/announcements.json';\r\n\r\n\r\nexport const theme = StyleSheet.create({\r\n    base: {\r\n        fontFamily: 'Cochin',\r\n    },\r\n    title: {\r\n        fontSize: 20,\r\n        marginBottom: 20,\r\n        fontWeight: 'bold',\r\n    },\r\n    scroll: {\r\n        marginHorizontal: 20,\r\n    },\r\n    view: {\r\n        marginBottom: 10.\r\n    },\r\n    info: {\r\n        marginTop: 20,\r\n        marginHorizontal: 20,\r\n    },\r\n    infoText:{\r\n        fontSize: 16,\r\n        marginBottom: 20,\r\n    },\r\n    categories: {\r\n        fontSize: 8,\r\n        color: \"grey\",\r\n        marginTop: 5,\r\n    },\r\n});\r\n\r\nfunction get_Announcements2(news) {\r\n    \r\n    hold = news[\"Items\"];\r\n    var announcements = [];\r\n    announcements.push(<View key={0} style={theme.title}></View>);\r\n    console.log(hold);\r\n    for (var i = 0; i < hold.length; i++) {\r\n        var summary = hold[i][\"Summary\"][\"Text\"];\r\n\r\n        \r\n        announcements.push(\r\n            <View style={theme.view} key={i + 1}>\r\n                <Text style={theme.title}>{hold[i][\"Title\"][\"Text\"]}</Text>\r\n                <Text >{fix_summary(summary)}</Text>\r\n            </View>\r\n        )\r\n    }\r\n    if (hold.length == 0) {\r\n        announcements.push(<View key={1}><Text style={theme.title}>All Buses Running Smoothly</Text></View>)\r\n    }\r\n    return announcements;\r\n}\r\n\r\n\r\nfunction fix_summary(sum) {\r\n    \r\n    if (sum.includes('</picture>')) {\r\n        var hold = sum.match(\"img src=\\\"(.*)\\\" alt=\");\r\n        var pic = hold[1]; \r\n        hold = sum.split(\"</picture>\");\r\n        hold = hold[1].split(\"<br />\");\r\n        var arr = [];\r\n        arr.push(<Image style={{ width:300, height:300 }} source={{uri: pic}} key={1}/>)\r\n        \r\n        for (var i = 0; i < hold.length; i++) {\r\n            var line = hold[i].replace('&#160;', '') + '\\n';\r\n            arr.push(line.trimStart());\r\n        }\r\n        return arr;\r\n    } else {\r\n        return <Text>{sum}</Text>\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport function Trial() {\r\n    const [news, setNews] = useState([]);\r\n    useEffect( () => {\r\n        const newsArr = async () => {\r\n            try {\r\n                // this still has to be set to the IP using ipConfig\r\n                const fetchString = \"https://transport.tamu.edu/BusRoutesFeed/api/Announcements\";\r\n                const response = await fetch(fetchString,\r\n                    {\r\n                        method: 'GET',\r\n                        headers: {\r\n                            Accept: 'application/json',\r\n                            'Content-Type': 'application/json',\r\n                        }\r\n                    });\r\n\r\n                var json = null;\r\n                if (response.status === 200) {\r\n                    json = await response.json();\r\n                    \r\n                   // console.log(json);                       // UNCOMMENT TO LOG JSON RESPONSES\r\n                    // waypoints = json;\r\n                } else {\r\n                    console.log(response.status);\r\n                }\r\n\r\n                return json;\r\n            } catch (err) {\r\n                console.log(err)\r\n            }\r\n        };\r\n        newsArr().then(setNews);\r\n    }, []);\r\n    console.log(news);\r\n    if (news.length == 0) {\r\n        console.log(\"News is Undefined\");\r\n        return <View style={theme.info}><Text style={theme.title} >All Buses Running Smoothly</Text></View>;\r\n       \r\n    } else {\r\n        //console.log(news);\r\n        return get_Announcements2(news);\r\n    }\r\n    \r\n}\r\n\r\nexport function get_Announcements() {\r\n    //console.log(Trial());\r\n    return Trial();   \r\n}\r\n\r\n\r\n\r\nexport function Information() {\r\n    return (\r\n        <View style={theme.info}>\r\n\r\n            <Text style={theme.title}>\r\n                Static VS ETA Times</Text>\r\n            <Text style={theme.infoText }>\r\n                Static times are scheduled times provided by A&M. These are times that the bus will wait for at each stop. \r\n                Some stops do not have a scheduled time.\r\n            </Text>\r\n            <Text style={theme.infoText}>\r\n                ETA Times are create using google maps and are intended to be more accurate stop times. \r\n                These times are calculated every minute to ensure they are updated. \r\n                The ETA table also provides predicted times for stops along each bus route that are not scheduled stops. \r\n            </Text>\r\n            <Text style={theme.title}>\r\n                Credits\r\n            </Text>\r\n            <Text style={theme.infoText}>\r\n            Icons made by Freepik from www.flaticon.com\r\n            </Text>\r\n        </View>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}